openapi: 3.1.0
info:
  title: Grafana Cloud k6
  version: 1.2.0
  description: HTTP API for interacting with Grafana Cloud k6.
  contact:
    name: Grafana Support
    url: https://grafana.com/help/
    email: info@grafana.com
paths:
  /cloud/v6/load_tests:
    get:
      operationId: load_tests_list
      description: List all available tests.
      summary: List all tests.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: query
        name: $count
        schema:
          type: boolean
        description: Include collection length in the response object as `@count`.
      - in: query
        name: $orderby
        schema:
          type: string
        description: |-
          Comma-separated list of fields to use when ordering the results. Available fields:
          - id
          - project_id
          - name
          - created
          - updated

          The default ascending order can be reversed by appending the `desc` specifier.
        examples:
          Multiple:
            value: id desc,project_id
      - in: query
        name: $skip
        schema:
          type: integer
        description: The initial index from which to return the results.
      - in: query
        name: $top
        schema:
          type: integer
          default: 1000
          maximum: 1000
        description: Number of results to return per page.
      - in: query
        name: name
        schema:
          type: string
        description: Filter results by load test name (exact match).
      tags:
      - load_tests
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoadTestListResponse'
              examples:
                OK:
                  value:
                    value:
                    - id: 1234
                      project_id: 312
                      name: Orders API Soak Test
                      baseline_test_run_id: null
                      created: '2024-12-03T09:53:00.553'
                      updated: '2024-12-03T09:53:00.553'
                    '@count': 123
                    '@nextLink': https://api.k6.io/cloud/v6/load_tests?$skip=50&$top=20
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/load_tests/{id}/test_runs:
    get:
      operationId: load_tests_test_runs_retrieve
      description: List all runs of a load test.
      summary: List all runs of a load test.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: query
        name: $count
        schema:
          type: boolean
        description: Include collection length in the response object as `@count`.
      - in: query
        name: $skip
        schema:
          type: integer
        description: The initial index from which to return the results.
      - in: query
        name: $top
        schema:
          type: integer
          default: 1000
          maximum: 1000
        description: Number of results to return per page.
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TestRunListResponse'
              examples:
                OK:
                  value:
                    value:
                    - id: 1234
                      test_id: 123
                      project_id: 12
                      started_by: user@example.com
                      created: '2024-06-01T19:00:00Z'
                      ended: null
                      cost:
                        total_vuh: 6.75
                        breakdown:
                          protocol_vuh: 6.75
                          browser_vuh: 0.0
                          base_total_vuh: 10.0
                          reduction_rate: 32.5
                          reduction_rate_breakdown:
                            volume: 10
                            local_run: 25
                      k6_dependencies:
                        k6: '>=v0.52'
                        k6/x/faker: '>=0.4.0'
                      k6_versions:
                        k6: v0.56.0
                        k6/x/faker: v0.4.1
                      note: User-defined note for the test run.
                      retention_expiry: '2024-07-01T19:30:30Z'
                      distribution:
                      - load_zone: amazon:us:ashburn
                        percent: 100
                      options:
                        stages:
                        - duration: 10m
                          target: 10
                        - duration: 20m
                          target: 10
                        cloud:
                          distribution:
                            amazon:us:ashburn:
                              loadZone: amazon:us:ashburn
                              percent: 100
                          projectID: 12
                      result: null
                      result_details: {}
                      status: running
                      status_details:
                        type: running
                        entered: '2024-06-01T19:00:20Z'
                      status_history:
                      - type: created
                        entered: '2024-06-01T19:00:00Z'
                      - type: initializing
                        entered: '2024-06-01T19:00:10Z'
                      - type: running
                        entered: '2024-06-01T19:00:20Z'
                    '@count': 123
                    '@nextLink': https://api.k6.io/cloud/v6/load_tests/123/test_runs?$skip=50&$top=20
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/load_tests/{id}:
    get:
      operationId: load_tests_retrieve
      description: Fetch a single load test.
      summary: Get a load test by ID.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoadTestApiModel'
              examples:
                OK:
                  value:
                    id: 1234
                    project_id: 312
                    name: Orders API Soak Test
                    baseline_test_run_id: null
                    created: '2024-12-03T09:53:00.553'
                    updated: '2024-12-03T09:53:00.553'
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    patch:
      operationId: load_tests_partial_update
      description: Update a load test.
      summary: Update a load test.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchLoadTestApiModel'
            examples:
              Update:
                value:
                  name: New Test Name
                  baseline_test_run_id: 123
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: The name is already taken.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    delete:
      operationId: load_tests_destroy
      description: Delete a load test.
      summary: Delete a load test.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: Cannot delete test while it's running.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/load_tests/{id}/move:
    put:
      operationId: load_tests_move
      description: |-
        Move a load test to a different project of the same organization.
        All respective test runs will be also moved to the new project.
      summary: Move a test to another project.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveLoadTestApiModel'
            examples:
              Move:
                value:
                  project_id: 123
        required: true
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: Test with the same name exists in the destination.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/load_tests/{id}/script:
    get:
      operationId: load_tests_script_retrieve
      description: |-
        Download the test script.

        The script can be either in the form of a single JavaScript file or a k6 .tar archive -
        the type is identified by the request content type.
      summary: Download the test script.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            text/javascript:
              schema:
                type: string
              examples:
                TextScript:
                  value: |
                    import http from 'k6/http';
                    import { sleep } from 'k6';

                    export const options = {
                      vus: 10,
                      duration: '30s',
                      cloud: {
                        // Project: Default project
                        projectID: 3684621,
                        // Test runs with the same name groups test runs together.
                        name: 'Test (04/12/2024-20:28:06)'
                      }
                    };

                    export default function() {
                      http.get('https://test.k6.io');
                      sleep(1);
                    }
                  summary: Text Script
            application/x-tar:
              schema:
                type: string
                format: binary
              examples:
                K6ArchiveScript:
                  value: (.tar data)
                  summary: K6 Archive Script
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    put:
      operationId: load_tests_script_update
      description: |-
        Upload the script for a test.

        The script can be either in the form of a single JavaScript text file or a k6 .tar archive -
        the type is auto-detected by the API. Any received payload that is not a .tar archive
        is assumed to be a JavaScript file.
      summary: Upload the script for a test.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      requestBody:
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
            examples:
              TextScript:
                value: |
                  import http from 'k6/http';
                  import { sleep } from 'k6';

                  export const options = {
                    vus: 10,
                    duration: '30s',
                    cloud: {
                      // Project: Default project
                      projectID: 3684621,
                      // Test runs with the same name groups test runs together.
                      name: 'Test (04/12/2024-20:28:06)'
                    }
                  };

                  export default function() {
                    http.get('https://test.k6.io');
                    sleep(1);
                  }
                summary: Text Script
              K6ArchiveScript:
                value: (.tar data)
                summary: K6 Archive Script
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/load_tests/{id}/start:
    post:
      operationId: load_tests_start
      description: Start a test in Grafana Cloud.
      summary: Start a test in Grafana Cloud.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test.
        required: true
      tags:
      - load_tests
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TestRunApiModel'
              examples:
                Started:
                  value:
                    id: 1234
                    test_id: 123
                    project_id: 12
                    started_by: user@example.com
                    created: '2024-06-01T19:00:00Z'
                    ended: null
                    cost: null
                    k6_dependencies:
                      k6: '>=v0.52'
                      k6/x/faker: '>=0.4.0'
                    k6_versions:
                      k6: v0.56.0
                      k6/x/faker: v0.4.1
                    note: ''
                    retention_expiry: '2024-06-07T19:00:00Z'
                    distribution: null
                    options: null
                    result: null
                    result_details: null
                    status: created
                    status_details:
                      type: created
                      entered: '2024-06-01T19:00:00Z'
                    status_history:
                    - type: created
                      entered: '2024-06-01T19:00:00Z'
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/projects:
    get:
      operationId: projects_list
      description: List all available projects.
      summary: List all projects.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: query
        name: $count
        schema:
          type: boolean
        description: Include collection length in the response object as `@count`.
      - in: query
        name: $orderby
        schema:
          type: string
        description: |-
          Comma-separated list of fields to use when ordering the results. Available fields:
          - created

          The default ascending order can be reversed by appending the `desc` specifier.
        examples:
          Simple:
            value: created desc
      - in: query
        name: $skip
        schema:
          type: integer
        description: The initial index from which to return the results.
      - in: query
        name: $top
        schema:
          type: integer
          default: 1000
          maximum: 1000
        description: Number of results to return per page.
      - in: query
        name: name
        schema:
          type: string
        description: Filter results by project name (exact match).
      tags:
      - projects
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectListResponse'
              examples:
                OK:
                  value:
                    value:
                    - id: 123
                      name: My Project
                      is_default: false
                      grafana_folder_uid: de0chath6zxfkb
                      created: '2024-12-04T19:57:46.339Z'
                      updated: '2024-12-04T19:57:46.339Z'
                    '@count': 123
                    '@nextLink': https://api.k6.io/cloud/v6/projects?$skip=50&$top=20
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    post:
      operationId: projects_create
      description: Create a new project.
      summary: Create a project.
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectApiModel'
            examples:
              Create:
                value:
                  name: My Project
        required: true
      security:
      - k6ApiToken: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectApiModel'
              examples:
                OK:
                  value:
                    id: 123
                    name: My Project
                    is_default: false
                    grafana_folder_uid: de0chath6zxfkb
                    created: '2024-12-04T19:57:46.339Z'
                    updated: '2024-12-04T19:57:46.339Z'
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '500':
          $ref: '#/components/responses/UnexpectedError'
      parameters:
      - $ref: '#/components/parameters/stackId'
  /cloud/v6/projects/{id}/limits:
    get:
      operationId: projects_limits_retrieve
      description: Fetch limits for a project.
      summary: Get project limits.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - projects
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectLimitsApiModel'
              examples:
                OK:
                  value:
                    project_id: 123
                    vuh_max_per_month: 50
                    vu_max_per_test: null
                    vu_browser_max_per_test: 5
                    duration_max_per_test: 600
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    patch:
      operationId: projects_limits_partial_update
      description: |-
        Update limits for a project.

        Set a limit to `null` to remove it.
      summary: Update project limits.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchProjectLimitsRequest'
            examples:
              UpdateAll:
                value:
                  vuh_max_per_month: 50
                  vu_max_per_test: 20
                  vu_browser_max_per_test: 5
                  duration_max_per_test: 600
                summary: Update All
              UpdateSingle:
                value:
                  vuh_max_per_month: 55
                summary: Update Single
              RemoveAll:
                value:
                  vuh_max_per_month: null
                  vu_max_per_test: null
                  vu_browser_max_per_test: null
                  duration_max_per_test: null
                summary: Remove All
              RemoveSingle:
                value:
                  duration_max_per_test: null
                summary: Remove Single
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/projects/{id}/load_tests:
    get:
      operationId: projects_load_tests_retrieve
      description: List load tests in a project.
      summary: List load tests in a project.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: query
        name: $count
        schema:
          type: boolean
        description: Include collection length in the response object as `@count`.
      - in: query
        name: $orderby
        schema:
          type: string
        description: |-
          Comma-separated list of fields to use when ordering the results. Available fields:
          - id
          - project_id
          - name
          - created
          - updated

          The default ascending order can be reversed by appending the `desc` specifier.
        examples:
          Multiple:
            value: id desc,project_id
      - in: query
        name: $skip
        schema:
          type: integer
        description: The initial index from which to return the results.
      - in: query
        name: $top
        schema:
          type: integer
          default: 1000
          maximum: 1000
        description: Number of results to return per page.
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - load_tests
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoadTestListResponse'
              examples:
                OK:
                  value:
                    value:
                    - id: 1234
                      project_id: 312
                      name: Orders API Soak Test
                      baseline_test_run_id: null
                      created: '2024-12-03T09:53:00.553'
                      updated: '2024-12-03T09:53:00.553'
                    '@count': 123
                    '@nextLink': https://api.k6.io/cloud/v6/projects/312/load_tests?$skip=50&$top=20
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    post:
      operationId: projects_load_tests_create
      description: |-
        Create a new test in the project.

        The script can be either in the form of a single JavaScript text file or a k6 .tar archive -
        the type is auto-detected by the API. Any received payload that is not a .tar archive
        is assumed to be a JavaScript file.
      summary: Create a new test.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - load_tests
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateLoadTestApiModel'
            examples:
              TextScript:
                value:
                  name: Orders API Soak Test
                  script: |
                    import http from 'k6/http';
                    import { sleep } from 'k6';

                    export const options = {
                      vus: 10,
                      duration: '30s',
                      cloud: {
                        // Project: Default project
                        projectID: 3684621,
                        // Test runs with the same name groups test runs together.
                        name: 'Test (04/12/2024-20:28:06)'
                      }
                    };

                    export default function() {
                      http.get('https://test.k6.io');
                      sleep(1);
                    }
                summary: Text Script
              K6ArchiveScript:
                value:
                  name: Orders API Soak Test
                  script: (.tar data)
                summary: K6 Archive Script
        required: true
      security:
      - k6ApiToken: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoadTestApiModel'
              examples:
                OK:
                  value:
                    id: 1234
                    project_id: 312
                    name: Orders API Soak Test
                    baseline_test_run_id: null
                    created: '2024-12-03T09:53:00.553'
                    updated: '2024-12-03T09:53:00.553'
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: The name is already taken.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/projects/{id}:
    get:
      operationId: projects_retrieve
      description: Retrieve a single project.
      summary: Get a project by ID.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - projects
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectApiModel'
              examples:
                OK:
                  value:
                    id: 123
                    name: My Project
                    is_default: false
                    grafana_folder_uid: de0chath6zxfkb
                    created: '2024-12-04T19:57:46.339Z'
                    updated: '2024-12-04T19:57:46.339Z'
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    patch:
      operationId: projects_partial_update
      description: Update a project.
      summary: Update a project.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchProjectApiModel'
            examples:
              Update:
                value:
                  name: New Project Name
        required: true
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    delete:
      operationId: projects_destroy
      description: Delete a project.
      summary: Delete a project.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the project.
        required: true
      tags:
      - projects
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: Cannot delete project with a running test.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/test_runs:
    get:
      operationId: test_runs_list
      description: List all available test runs.
      summary: List all test runs.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: query
        name: $count
        schema:
          type: boolean
        description: Include collection length in the response object as `@count`.
      - in: query
        name: $skip
        schema:
          type: integer
        description: The initial index from which to return the results.
      - in: query
        name: $top
        schema:
          type: integer
          default: 1000
          maximum: 1000
        description: Number of results to return per page.
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TestRunListResponse'
              examples:
                OK:
                  value:
                    value:
                    - id: 1234
                      test_id: 123
                      project_id: 12
                      started_by: user@example.com
                      created: '2024-06-01T19:00:00Z'
                      ended: null
                      cost:
                        total_vuh: 6.75
                        breakdown:
                          protocol_vuh: 6.75
                          browser_vuh: 0.0
                          base_total_vuh: 10.0
                          reduction_rate: 32.5
                          reduction_rate_breakdown:
                            volume: 10
                            local_run: 25
                      k6_dependencies:
                        k6: '>=v0.52'
                        k6/x/faker: '>=0.4.0'
                      k6_versions:
                        k6: v0.56.0
                        k6/x/faker: v0.4.1
                      note: User-defined note for the test run.
                      retention_expiry: '2024-07-01T19:30:30Z'
                      distribution:
                      - load_zone: amazon:us:ashburn
                        percent: 100
                      options:
                        stages:
                        - duration: 10m
                          target: 10
                        - duration: 20m
                          target: 10
                        cloud:
                          distribution:
                            amazon:us:ashburn:
                              loadZone: amazon:us:ashburn
                              percent: 100
                          projectID: 12
                      result: null
                      result_details: {}
                      status: running
                      status_details:
                        type: running
                        entered: '2024-06-01T19:00:20Z'
                      status_history:
                      - type: created
                        entered: '2024-06-01T19:00:00Z'
                      - type: initializing
                        entered: '2024-06-01T19:00:10Z'
                      - type: running
                        entered: '2024-06-01T19:00:20Z'
                    '@count': 123
                    '@nextLink': https://api.k6.io/cloud/v6/test_runs?$skip=50&$top=20
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/test_runs/{id}:
    get:
      operationId: test_runs_retrieve
      description: Fetch a single test run.
      summary: Get a test run by ID.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TestRunApiModel'
              examples:
                Running:
                  value:
                    id: 1234
                    test_id: 123
                    project_id: 12
                    started_by: user@example.com
                    created: '2024-06-01T19:00:00Z'
                    ended: null
                    cost:
                      total_vuh: 6.75
                      breakdown:
                        protocol_vuh: 6.75
                        browser_vuh: 0.0
                        base_total_vuh: 10.0
                        reduction_rate: 32.5
                        reduction_rate_breakdown:
                          volume: 10
                          local_run: 25
                    k6_dependencies:
                      k6: '>=v0.52'
                      k6/x/faker: '>=0.4.0'
                    k6_versions:
                      k6: v0.56.0
                      k6/x/faker: v0.4.1
                    note: User-defined note for the test run.
                    retention_expiry: '2024-07-01T19:30:30Z'
                    distribution:
                    - load_zone: amazon:us:ashburn
                      percent: 100
                    options:
                      stages:
                      - duration: 10m
                        target: 10
                      - duration: 20m
                        target: 10
                      cloud:
                        distribution:
                          amazon:us:ashburn:
                            loadZone: amazon:us:ashburn
                            percent: 100
                        projectID: 12
                    result: null
                    result_details: {}
                    status: running
                    status_details:
                      type: running
                      entered: '2024-06-01T19:00:20Z'
                    status_history:
                    - type: created
                      entered: '2024-06-01T19:00:00Z'
                    - type: initializing
                      entered: '2024-06-01T19:00:10Z'
                    - type: running
                      entered: '2024-06-01T19:00:20Z'
                Completed:
                  value:
                    id: 1234
                    test_id: 123
                    project_id: 12
                    started_by: user@example.com
                    created: '2024-06-01T19:00:00Z'
                    ended: '2024-06-01T19:30:30Z'
                    cost:
                      total_vuh: 6.75
                      breakdown:
                        protocol_vuh: 6.75
                        browser_vuh: 0.0
                        base_total_vuh: 10.0
                        reduction_rate: 32.5
                        reduction_rate_breakdown:
                          volume: 10
                          local_run: 25
                    k6_dependencies:
                      k6: '>=v0.52'
                      k6/x/faker: '>=0.4.0'
                    k6_versions:
                      k6: v0.56.0
                      k6/x/faker: v0.4.1
                    note: User-defined note for the test run.
                    retention_expiry: '2024-07-01T19:30:30Z'
                    distribution:
                    - load_zone: amazon:us:ashburn
                      percent: 100
                    options:
                      stages:
                      - duration: 10m
                        target: 10
                      - duration: 20m
                        target: 10
                      cloud:
                        distribution:
                          amazon:us:ashburn:
                            loadZone: amazon:us:ashburn
                            percent: 100
                        projectID: 12
                    result: success
                    result_details: {}
                    status: completed
                    status_details:
                      type: completed
                      entered: '2024-06-01T19:30:30Z'
                    status_history:
                    - type: created
                      entered: '2024-06-01T19:00:00Z'
                    - type: initializing
                      entered: '2024-06-01T19:00:10Z'
                    - type: running
                      entered: '2024-06-01T19:00:20Z'
                    - type: processing_metrics
                      entered: '2024-06-01T19:30:20Z'
                    - type: completed
                      entered: '2024-06-01T19:30:30Z'
                ValidationError:
                  value:
                    id: 1234
                    test_id: 123
                    project_id: 12
                    started_by: user@example.com
                    created: '2024-06-01T19:00:00Z'
                    ended: '2024-06-01T19:00:10Z'
                    cost: null
                    k6_dependencies:
                      k6: '>=v0.52'
                      k6/x/faker: '>=0.4.0'
                    k6_versions:
                      k6: v0.56.0
                      k6/x/faker: v0.4.1
                    note: ''
                    retention_expiry: '2024-07-01T19:00:10Z'
                    distribution: null
                    options: null
                    result: error
                    result_details: {}
                    status: aborted
                    status_details:
                      type: aborted
                      entered: '2024-06-24T19:44:36.46Z'
                      extra:
                        by_user: null
                        message: Validation error
                        code: 123
                    status_history:
                    - type: created
                      entered: '2024-06-01T19:00:00Z'
                    - type: aborted
                      entered: '2024-06-01T19:00:10Z'
                      extra:
                        by_user: null
                        message: Validation error
                        code: 123
                  summary: Validation Error
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    patch:
      operationId: test_runs_partial_update
      description: Update a test run.
      summary: Update a test run.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchTestRunApiModel'
            examples:
              Update:
                value:
                  note: New note for the test run
        required: true
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
    delete:
      operationId: test_runs_destroy
      description: Delete a test run.
      summary: Delete a test run.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: Cannot delete test while it's running.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/test_runs/{id}/abort:
    post:
      operationId: test_runs_abort
      description: Abort a running test.
      summary: Abort a running test.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
          description: Cannot abort a non-running test.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/test_runs/{id}/save:
    post:
      operationId: test_runs_save
      description: Persist test run results to keep them past the data-retention period.
      summary: Save test run results.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseApiModel'
              examples:
                Deleted:
                  value:
                    error:
                      message: Test run has been deleted
                      code: conflict
                LimitReached:
                  value:
                    error:
                      message: The maximum number of saved test runs has been reached
                      code: conflict
                  summary: Limit reached
          description: The test run results have been deleted, or the maximum number
            of saved test runs has been reached.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/test_runs/{id}/script:
    get:
      operationId: test_runs_script_retrieve
      description: Download the test run script.
      summary: Download the test run script.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            text/javascript:
              schema:
                type: string
              examples:
                TextScript:
                  value: |
                    import http from 'k6/http';
                    import { sleep } from 'k6';

                    export const options = {
                      vus: 10,
                      duration: '30s',
                      cloud: {
                        // Project: Default project
                        projectID: 3684621,
                        // Test runs with the same name groups test runs together.
                        name: 'Test (04/12/2024-20:28:06)'
                      }
                    };

                    export default function() {
                      http.get('https://test.k6.io');
                      sleep(1);
                    }
                  summary: Text Script
            application/x-tar:
              schema:
                type: string
                format: binary
              examples:
                K6ArchiveScript:
                  value: (.tar data)
                  summary: K6 Archive Script
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/test_runs/{id}/unsave:
    post:
      operationId: test_runs_unsave
      description: |-
        Disable persistence of the test run results past the data-retention period.

        The data will be automatically deleted at the end of the retention period.
      summary: Unsave test run results.
      parameters:
      - $ref: '#/components/parameters/stackId'
      - in: path
        name: id
        schema:
          type: integer
        description: ID of the load test run.
        required: true
      tags:
      - test_runs
      security:
      - k6ApiToken: []
      responses:
        '204':
          description: OK.
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/UnexpectedError'
  /cloud/v6/validate_options:
    post:
      operationId: validate_options
      description: |-
        Verify a test can be run in Grafana Cloud with the provided k6 script options.

        Project ID can be specified in the root object as well as under `options.cloud`.
      summary: Validate k6 script options.
      tags:
      - load_tests
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateOptionsRequest'
            examples:
              ProjectIdInOptions:
                value:
                  options:
                    stages:
                    - duration: 1m
                      target: 20
                    - duration: 3m
                      target: 20
                    - duration: 30s
                      target: 0
                    cloud:
                      distribution:
                        amazon:us:ashburn:
                          loadZone: amazon:us:ashburn
                          percent: 100
                      projectID: 123456
        required: true
      security:
      - k6ApiToken: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidateOptionsResponse'
              examples:
                OK:
                  value:
                    vuh_usage: 6.75
                    breakdown:
                      protocol_vuh: 6.75
                      browser_vuh: 0.0
                      base_total_vuh: 10.0
                      reduction_rate: 32.5
                      reduction_rate_breakdown:
                        volume: 10
                        local_run: 25
          description: OK.
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '500':
          $ref: '#/components/responses/UnexpectedError'
      parameters:
      - $ref: '#/components/parameters/stackId'
components:
  schemas:
    CloudOptions:
      additionalProperties: true
      properties:
        projectID:
          default: null
          description: ID of a project where the test belongs.
          title: Projectid
          type:
          - integer
          - 'null'
      title: CloudOptions
      type: object
    CostBreakdownApiModel:
      description: Breakdown details of the test cost.
      properties:
        protocol_vuh:
          anyOf:
          - type: number
          - type: string
          description: Number of billed VUH charged for the protocol part of the test
            run.
          title: Protocol Vuh
        browser_vuh:
          anyOf:
          - type: number
          - type: string
          description: Number of billed VUH charged for the browser part of the test
            run.
          title: Browser Vuh
        base_total_vuh:
          anyOf:
          - type: number
          - type: string
          description: VUH usage before applying the effective reduction.
          title: Base Total Vuh
        reduction_rate:
          anyOf:
          - type: number
          - type: string
          description: The effective reduction rate after applying all individual
            reductions to the base VUH usage.
          title: Reduction Rate
        reduction_rate_breakdown:
          additionalProperties:
            anyOf:
            - type: number
            - type: string
          description: The individual reduction rates applied to the base VUH usage.
          title: Reduction Rate Breakdown
          type:
          - object
          - 'null'
      required:
      - protocol_vuh
      - browser_vuh
      - base_total_vuh
      - reduction_rate
      - reduction_rate_breakdown
      title: CostBreakdownApiModel
      type: object
    CreateLoadTestApiModel:
      additionalProperties: false
      properties:
        name:
          description: Unique name of the test within the project.
          maxLength: 300
          minLength: 1
          title: Name
          type: string
        script:
          description: Test script in the form of a UTF-8 encoded text or a k6 .tar
            archive.
          format: binary
          title: Script
          type: string
      required:
      - name
      - script
      title: CreateLoadTest
      type: object
    CreateProjectApiModel:
      properties:
        name:
          description: Project name.
          maxLength: 255
          minLength: 1
          title: Name
          type: string
      required:
      - name
      title: CreateProject
      type: object
    DistributionZoneApiModel:
      properties:
        load_zone:
          description: Name of the load zone.
          title: Load Zone
          type: string
        percent:
          description: Percentage of the load that runs from the load zone.
          title: Percent
          type: integer
      required:
      - load_zone
      - percent
      title: DistributionZone
      type: object
    ErrorApiModel:
      description: Details of the error.
      properties:
        message:
          description: Human-readable string describing the error.
          title: Message
          type: string
        code:
          description: Service-defined error code.
          title: Code
          type: string
        target:
          default: null
          description: A string indicating the target of the error. For example, the
            name of the property in error.
          title: Target
          type:
          - string
          - 'null'
        details:
          default: null
          description: Array of objects with more specific error information when
            applicable.
          items:
            $ref: '#/components/schemas/ErrorDetailsApiModel'
          title: Details
          type:
          - array
          - 'null'
      required:
      - message
      - code
      title: Error
      type: object
    ErrorDetailsApiModel:
      properties:
        message:
          description: Human-readable string describing the error.
          title: Message
          type: string
        code:
          description: Service-defined error code.
          title: Code
          type: string
        target:
          default: null
          description: A string indicating the target of the error. For example, the
            name of the property in error.
          title: Target
          type:
          - string
          - 'null'
      required:
      - message
      - code
      title: ErrorDetails
      type: object
    ErrorResponseApiModel:
      properties:
        error:
          $ref: '#/components/schemas/ErrorApiModel'
      required:
      - error
      title: ErrorResponse
      type: object
    LoadTestApiModel:
      properties:
        id:
          description: ID of the load test.
          title: Id
          type: integer
        project_id:
          description: ID of the parent project.
          title: Project Id
          type: integer
        name:
          description: Unique name of the test within the project.
          maxLength: 300
          minLength: 1
          title: Name
          type: string
        baseline_test_run_id:
          description: ID of a baseline test run used for results comparison.
          title: Baseline Test Run Id
          type:
          - integer
          - 'null'
        created:
          description: The date when the test was created.
          format: date-time
          title: Created
          type: string
        updated:
          description: The date when the test was last updated.
          format: date-time
          title: Updated
          type: string
      required:
      - id
      - project_id
      - name
      - baseline_test_run_id
      - created
      - updated
      title: LoadTest
      type: object
    LoadTestListResponse:
      properties:
        value:
          description: List of the resulting values.
          items:
            $ref: '#/components/schemas/LoadTestApiModel'
          title: Value
          type: array
        '@count':
          description: Object count in the collection.
          examples:
          - 123
          title: '@Count'
          type: integer
        '@nextLink':
          description: A reference to the next page of results. The property is included
            until there are no more pages of results to retrieve.
          examples:
          - http://api.example.org/accounts/?%24skip=400&%24top=100
          format: uri
          title: '@Nextlink'
          type: string
      required:
      - value
      title: LoadTestListResponse
      type: object
    MoveLoadTestApiModel:
      additionalProperties: false
      properties:
        project_id:
          description: ID of the destination project.
          title: Project ID
          type: integer
      required:
      - project_id
      title: MoveLoadTest
      type: object
    Options:
      additionalProperties: true
      properties:
        cloud:
          default: null
          description: Cloud-specific k6 options.
          oneOf:
          - $ref: '#/components/schemas/CloudOptions'
          - type: 'null'
      title: Options
      type: object
    PatchLoadTestApiModel:
      additionalProperties: false
      properties:
        name:
          description: Unique name of the test within the project.
          maxLength: 300
          minLength: 1
          title: Name
          type: string
        baseline_test_run_id:
          description: ID of a baseline test run used for results comparison.
          title: Baseline Test Run Id
          type:
          - integer
          - 'null'
      title: PatchLoadTest
      type: object
    PatchProjectApiModel:
      additionalProperties: false
      properties:
        name:
          description: Project name.
          maxLength: 255
          minLength: 1
          title: Name
          type: string
      required:
      - name
      title: PatchProject
      type: object
    PatchProjectLimitsRequest:
      additionalProperties: false
      properties:
        vuh_max_per_month:
          description: Max amount of virtual user hours (VUH) used per one calendar
            month.
          minimum: 1
          title: Vuh Max Per Month
          type:
          - integer
          - 'null'
        vu_max_per_test:
          description: Max number of concurrent virtual users (VUs) used in one test.
          minimum: 1
          title: Vu Max Per Test
          type:
          - integer
          - 'null'
        vu_browser_max_per_test:
          description: Max number of concurrent browser virtual users (VUs) used in
            one test.
          minimum: 1
          title: Vu Browser Max Per Test
          type:
          - integer
          - 'null'
        duration_max_per_test:
          description: Max duration of a test in seconds.
          minimum: 1
          title: Duration Max Per Test
          type:
          - integer
          - 'null'
      title: PatchProjectLimitsRequest
      type: object
    PatchTestRunApiModel:
      additionalProperties: false
      properties:
        note:
          description: User-defined note for the test run.
          title: Note
          type: string
      required:
      - note
      title: PatchTestRun
      type: object
    ProjectApiModel:
      properties:
        id:
          description: Project ID.
          title: Id
          type: integer
        name:
          description: Project name.
          maxLength: 255
          minLength: 1
          title: Name
          type: string
        is_default:
          description: Use this project as default for running tests when no explicit
            project ID is provided.
          title: Is Default
          type: boolean
        grafana_folder_uid:
          description: Grafana folder UID.
          title: Grafana Folder UID
          type:
          - string
          - 'null'
        created:
          description: The date when the project was created.
          format: date-time
          title: Created
          type: string
        updated:
          description: The date when the project was last updated.
          format: date-time
          title: Updated
          type: string
      required:
      - id
      - name
      - is_default
      - grafana_folder_uid
      - created
      - updated
      title: Project
      type: object
    ProjectLimitsApiModel:
      properties:
        project_id:
          description: ID of the related project.
          title: Project Id
          type: integer
        vuh_max_per_month:
          description: Max amount of virtual user hours (VUH) used per one calendar
            month.
          minimum: 1
          title: Vuh Max Per Month
          type:
          - integer
          - 'null'
        vu_max_per_test:
          description: Max number of concurrent virtual users (VUs) used in one test.
          minimum: 1
          title: Vu Max Per Test
          type:
          - integer
          - 'null'
        vu_browser_max_per_test:
          description: Max number of concurrent browser virtual users (VUs) used in
            one test.
          minimum: 1
          title: Vu Browser Max Per Test
          type:
          - integer
          - 'null'
        duration_max_per_test:
          description: Max duration of a test in seconds.
          minimum: 1
          title: Duration Max Per Test
          type:
          - integer
          - 'null'
      required:
      - project_id
      - vuh_max_per_month
      - vu_max_per_test
      - vu_browser_max_per_test
      - duration_max_per_test
      title: ProjectLimits
      type: object
    ProjectListResponse:
      properties:
        value:
          description: List of the resulting values.
          items:
            $ref: '#/components/schemas/ProjectApiModel'
          title: Value
          type: array
        '@count':
          description: Object count in the collection.
          examples:
          - 123
          title: '@Count'
          type: integer
        '@nextLink':
          description: A reference to the next page of results. The property is included
            until there are no more pages of results to retrieve.
          examples:
          - http://api.example.org/accounts/?%24skip=400&%24top=100
          format: uri
          title: '@Nextlink'
          type: string
      required:
      - value
      title: ProjectListResponse
      type: object
    StatusApiModel:
      description: Details of the test run status.
      properties:
        type:
          description: 'Type of simple test run status: `created`, `queued`, `initializing`,
            `running`, `processing_metrics`, `completed` or `aborted`.'
          title: Type
          type: string
        entered:
          description: Date and time when the test run entered the status.
          format: date-time
          title: Entered
          type: string
        extra:
          default: null
          description: Extra information about the indicated status.
          oneOf:
          - $ref: '#/components/schemas/StatusExtraApiModel'
          - type: 'null'
      required:
      - type
      - entered
      title: Status
      type: object
    StatusExtraApiModel:
      properties:
        by_user:
          description: Email of the user that set the status if applicable.
          format: email
          title: By User
          type:
          - string
          - 'null'
        message:
          description: Human-readable string describing the error if applicable.
          title: Message
          type:
          - string
          - 'null'
        code:
          description: Service-defined error code if applicable.
          title: Code
          type:
          - integer
          - 'null'
      required:
      - by_user
      - message
      - code
      title: StatusExtra
      type: object
    TestCostApiModel:
      properties:
        total_vuh:
          anyOf:
          - type: number
          - type: string
          description: Total number of billed VUH charged for the test run.
          title: Total Vuh
        breakdown:
          $ref: '#/components/schemas/CostBreakdownApiModel'
      required:
      - total_vuh
      - breakdown
      title: TestCost
      type: object
    TestRunApiModel:
      description: The API model for a test run.
      properties:
        id:
          description: ID of the test run.
          title: Id
          type: integer
        test_id:
          description: ID of the parent test.
          title: Test Id
          type: integer
        project_id:
          description: ID of the parent project.
          title: Project Id
          type: integer
        started_by:
          description: Email of the user who started the test if started with a user
            token.
          format: email
          title: Started By
          type:
          - string
          - 'null'
        created:
          description: Date and time when the test run was started.
          format: date-time
          title: Created
          type: string
        ended:
          description: Date and time when the test run ended. Unset if the test is
            still running.
          format: date-time
          title: Ended
          type:
          - string
          - 'null'
        note:
          description: User-defined note for the test run.
          title: Note
          type: string
        retention_expiry:
          description: Timestamp after which the test run results are deleted or null
            if the test run is saved.
          format: date-time
          title: Retention Expiry
          type:
          - string
          - 'null'
        cost:
          description: |-
            Test run cost details. The cost is available only after test run validation.

            - For test runs still in progress, the value is an estimate of the full cost that will be charged upon successful completion.
            - For finished test runs, the value is the real cost charged for the test run.
          oneOf:
          - $ref: '#/components/schemas/TestCostApiModel'
          - type: 'null'
        status:
          description: Current test run status.
          title: Status
          type: string
        status_details:
          $ref: '#/components/schemas/StatusApiModel'
          description: Details of the current test run status.
        status_history:
          description: List of test run status objects sorted by the status start
            time. The list represents the test run status history.
          items:
            $ref: '#/components/schemas/StatusApiModel'
          title: Status History
          type: array
        distribution:
          description: List of the load zones configured for the test and the corresponding
            distribution percentages.
          items:
            $ref: '#/components/schemas/DistributionZoneApiModel'
          title: Distribution
          type:
          - array
          - 'null'
        result:
          description: Test run result. `passed` if there were no issues, `failed`
            if thresholds were breached, `error` if the execution was not completed.
          title: Result
          type:
          - string
          - 'null'
        result_details:
          description: Additional information about the test run result.
          title: Result Details
          type:
          - object
          - 'null'
        options:
          description: The original options object if available.
          title: Options
          type:
          - object
          - 'null'
        k6_dependencies:
          additionalProperties:
            type: string
          description: The requested version of k6 and extensions that was part of
            the script/archive.
          title: k6 Dependencies
          type: object
        k6_versions:
          additionalProperties:
            type: string
          description: The computed version for k6 and extensions used to run the
            test.
          title: k6 Versions
          type: object
      required:
      - id
      - test_id
      - project_id
      - started_by
      - created
      - ended
      - note
      - retention_expiry
      - cost
      - status
      - status_details
      - status_history
      - distribution
      - result
      - result_details
      - options
      - k6_dependencies
      - k6_versions
      title: TestRun
      type: object
    TestRunListResponse:
      properties:
        value:
          description: List of the resulting values.
          items:
            $ref: '#/components/schemas/TestRunApiModel'
          title: Value
          type: array
        '@count':
          description: Object count in the collection.
          examples:
          - 123
          title: '@Count'
          type: integer
        '@nextLink':
          description: A reference to the next page of results. The property is included
            until there are no more pages of results to retrieve.
          examples:
          - http://api.example.org/accounts/?%24skip=400&%24top=100
          format: uri
          title: '@Nextlink'
          type: string
      required:
      - value
      title: TestRunListResponse
      type: object
    ValidateOptionsRequest:
      properties:
        project_id:
          default: null
          description: ID of a project where the test belongs.
          title: Project Id
          type:
          - integer
          - 'null'
        options:
          $ref: '#/components/schemas/Options'
          description: k6 script options object to validate.
      required:
      - options
      title: ValidateOptionsRequest
      type: object
    ValidateOptionsResponse:
      properties:
        vuh_usage:
          description: How many VUH will be charged for the test.
          title: Vuh Usage
          type: number
        breakdown:
          $ref: '#/components/schemas/CostBreakdownApiModel'
          description: Breakdown of the VUH usage.
      required:
      - vuh_usage
      - breakdown
      title: ValidateOptionsResponse
      type: object
  securitySchemes:
    k6ApiToken:
      type: http
      scheme: bearer
      description: Token-based authentication using k6 Personal API token or Grafana
        Stack API token.
  parameters:
    stackId:
      in: header
      name: X-Stack-Id
      description: |-
        Numeric ID of the Grafana stack representing the request scope.
        - If the API is called with a *Personal API token*, the user must be a member of the specified stack.
        - If the API is called with a *Grafana Stack API token*, the value must be the ID of the corresponding stack.
      schema:
        type: integer
      required: true
  responses:
    ValidationError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponseApiModel'
      description: Request validation error.
    Unauthorized:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponseApiModel'
      description: Invalid token or authentication scheme.
    PermissionDenied:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponseApiModel'
      description: The user does not have permission to perform this action.
    NotFound:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponseApiModel'
      description: Resource not found.
    UnexpectedError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponseApiModel'
      description: Unexpected error.
servers:
- url: https://api.k6.io
  description: Global k6 Cloud API.
tags:
- name: load_tests
  description: API endpoints for managing and starting tests.
- name: projects
  description: API endpoints for managing projects.
- name: test_runs
  description: API endpoints for managing test runs.
